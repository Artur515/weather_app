(this["webpackJsonpweather-spa"]=this["webpackJsonpweather-spa"]||[]).push([[0],{108:function(t,e,n){},140:function(t,e,n){"use strict";n.r(e);var i=n(0),c=n(52),a=n.n(c),r=(n(108),n(14)),o=n(16),s="/weather",l=n(15),u=n(60),d=n.n(u),j="aa2b5a08132ad5ff89cccd594790c464",h="https://api.openweathermap.org/data/2.5/",b=function(t){return d.a.get(h+"weather?id=".concat(t,"&units=metric&appid=").concat(j))},p=n(20),O=n(59),x=Object(O.b)({name:"weather",initialState:{listOfCities:[],weatherOfCity:null,fullWeatherInfo:null,error:null},reducers:{addToListOfCity:function(t,e){var n;(n=t.listOfCities).push.apply(n,Object(p.a)(e.payload))},removeCity:function(t,e){t.listOfCities=t.listOfCities.filter((function(t){return t.id!==e.payload}))},setWeatherOfCity:function(t,e){t.weatherOfCity=e.payload},setFullWeatherInfo:function(t,e){t.fullWeatherInfo=e.payload},getError:function(t,e){t.error=e.payload}}}),f=x.reducer,m=x.actions,v=m.addToListOfCity,y=m.removeCity,g=m.setWeatherOfCity,w=m.setFullWeatherInfo,C=m.getError,k=n(88),I=n.n(k),S=n(1),W=function(t){var e=t.props.split("").reverse();return Object(S.jsx)("div",{className:I.a.load,children:e.map((function(t){return Object(S.jsx)("div",{children:t},t)}))})},R=n(189),L=n(182),E=n(184),N=n(185),_=n(90),T=n.n(_),B=n(186),F=function(){var t=Object(l.c)((function(t){return t.toolkitReduce.error})),e=Object(l.b)(),n=Object(o.g)();return Object(S.jsxs)(L.a,{sx:{maxWidth:550,marginTop:5},children:[Object(S.jsxs)(E.a,{children:[Object(S.jsx)(N.a,{sx:{fontSize:14,color:"red"},gutterBottom:!0,children:t.message}),Object(S.jsx)(N.a,{variant:"h5",sx:{color:"red"},children:t.name}),Object(S.jsx)(N.a,{variant:"body2",children:t.stack})]}),Object(S.jsx)(B.a,{className:"cursor",sx:{display:"flex",alignItems:"center",justifyContent:"space-around",pl:1,pb:3,pt:1},children:Object(S.jsx)(T.a,{onClick:function(){e(C(null)),n.push(s)}})})]})},z=n(187),M=n(188),J=function(t){var e=t.title,n=t.text,i=t.meaning;return Object(S.jsxs)(B.a,{color:"text.secondary",sx:{margin:"25px"},children:[Object(S.jsx)("div",{children:e}),Object(S.jsxs)("div",{children:[n," ",i]})]})},V=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Date(1e3*(t+e)),i=n.getUTCHours()+":"+n.getMinutes()+":"+n.getSeconds();return i},A=function(t){var e=t.hour,n=Object(l.c)((function(t){return t.toolkitReduce.fullWeatherInfo}));return Object(S.jsxs)(L.a,{sx:{minWidth:80,height:100,textAlign:"center",position:"relative",bottom:"".concat(parseInt(e.main.temp),"px")},children:[Object(S.jsx)("img",{style:{width:"30px"},src:"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),alt:e.weather[0].description}),Object(S.jsx)("p",{children:V(e.dt,n.city.timezone)}),Object(S.jsxs)("p",{children:[e.main.temp," \u0421\xba"]})]})},H=function(){var t=Object(l.c)((function(t){return t.toolkitReduce.fullWeatherInfo}));return Object(S.jsx)(S.Fragment,{children:null!==t?Object(S.jsxs)(B.a,{children:[Object(S.jsxs)(E.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-around"},children:[Object(S.jsx)(J,{title:"Sunrise",text:V(t.city.sunrise,t.city.timezone)}),Object(S.jsx)(J,{title:"Sunset",text:V(t.city.sunset,t.city.timezone)})]}),Object(S.jsx)("div",{style:{display:"flex",alignItems:"center",overflowX:"scroll",maxWidth:"1000px",minHeight:"200px"},children:t.list.map((function(t){return Object(S.jsx)(A,{hour:t},t.dt)}))})]}):Object(S.jsx)(W,{props:"Loading"})})},q=n(92),D=n.n(q),G=function(){var t=Object(i.useState)(!1),e=Object(r.a)(t,2),n=e[0],c=e[1],a=Object(o.h)(),s=Object(l.b)(),u=Object(l.c)((function(t){return t.toolkitReduce.weatherOfCity})),p=Object(l.c)((function(t){return t.toolkitReduce.fullWeatherInfo})),O=Object(l.c)((function(t){return t.toolkitReduce.error}));Object(i.useEffect)((function(){c(!0),b(a.id).then((function(t){return s(g(t.data))})).catch((function(t){s(C(t)),s(g(null))})).finally((function(){return c(!1)}))}),[a.id]);return Object(S.jsxs)(S.Fragment,{children:[n&&Object(S.jsx)(W,{props:"Loading"}),O&&Object(S.jsx)(F,{}),null===u?Object(S.jsx)(W,{props:"Loading"}):Object(S.jsxs)(L.a,{sx:{padding:"15px"},children:[Object(S.jsxs)(B.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-around"},children:[Object(S.jsx)(z.a,{component:"img",sx:{width:150},src:"http://openweathermap.org/img/wn/".concat(null===u||void 0===u?void 0:u.weather[0].icon,"@2x.png"),alt:null===u||void 0===u?void 0:u.weather[0].description}),Object(S.jsx)(N.a,{gutterBottom:!0,variant:"h5",component:"div",children:null===u||void 0===u?void 0:u.name}),Object(S.jsx)(D.a,{className:"cursor",onClick:function(){c(!0),b(a.id).then((function(t){return s(g(t.data))})).catch((function(t){s(C(t)),s(g(null))})).finally((function(){return c(!1)}))}})]}),Object(S.jsxs)(E.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-around"},children:[Object(S.jsx)(J,{title:"Temperature",text:parseInt(null===u||void 0===u?void 0:u.main.temp),meaning:" \u0421\xba"}),Object(S.jsx)(J,{title:"Min",text:parseInt(null===u||void 0===u?void 0:u.main.temp_min),meaning:" \u0421\xba"}),Object(S.jsx)(J,{title:"Max",text:parseInt(null===u||void 0===u?void 0:u.main.temp_max),meaning:" \u0421\xba"}),Object(S.jsx)(J,{title:"Wet",text:null===u||void 0===u?void 0:u.main.humidity,meaning:"%"}),Object(S.jsx)(J,{title:"Wind",text:null===u||void 0===u?void 0:u.wind.speed,meaning:"km/h"}),Object(S.jsx)(J,{title:"Clouds",text:null===u||void 0===u?void 0:u.clouds.all,meaning:"%"})]}),Object(S.jsx)(E.a,{children:p&&Object(S.jsx)(H,{})}),Object(S.jsx)(M.a,{children:p?"":Object(S.jsx)(R.a,{className:"",onClick:function(){var t;c(!0),(t=a.id,d.a.get(h+"forecast?id=".concat(t,"&units=metric&appid=").concat(j))).then((function(t){s(w(t.data))})).catch((function(t){s(C(t)),s(g(null))})).finally((function(){return c(!1)}))},children:"More"})})]})]})},U=n(93),X=n.n(U),K=n(36),P=function(t){var e=t.searchCity,n=t.setSearchCity,c=t.setValue,a=t.city,o=Object(i.useState)(!1),s=Object(r.a)(o,2),u=s[0],d=s[1],j=Object(l.c)((function(t){return t.toolkitReduce.listOfCities})),h=Object(l.b)();return Object(S.jsxs)(L.a,{sx:{width:300,margin:"20px"},children:[Object(S.jsxs)(E.a,{children:[Object(S.jsxs)(B.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-around",pl:1,pb:1},children:[Object(S.jsx)(K.b,{to:"/weather/".concat(null===a||void 0===a?void 0:a.id),children:Object(S.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(e?null===e||void 0===e?void 0:e.weather[0].icon:null===a||void 0===a?void 0:a.weather[0].icon,"@2x.png"),alt:(null===e||void 0===e?void 0:e.name)||(null===a||void 0===a?void 0:a.name)})}),Object(S.jsx)(N.a,{variant:"h5",children:(null===e||void 0===e?void 0:e.name)||(null===a||void 0===a?void 0:a.name)||"Name"})]}),Object(S.jsxs)(N.a,{variant:"h6",children:["temp ",parseInt(null===e||void 0===e?void 0:e.main.temp)||parseInt(null===a||void 0===a?void 0:a.main.temp)," \u0421\xba"]}),Object(S.jsxs)(N.a,{variant:"h6",children:["wet ",(null===e||void 0===e?void 0:e.main.humidity)||(null===a||void 0===a?void 0:a.main.humidity)," %"]}),Object(S.jsxs)(N.a,{variant:"body1",children:["wind ",(null===e||void 0===e?void 0:e.wind.speed)||(null===a||void 0===a?void 0:a.wind.speed)," km/h"]})]}),Object(S.jsxs)(B.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-around",pl:1,pb:3,pt:1},children:[e&&Object(S.jsx)(R.a,{variant:"outlined",color:"inherit",disabled:u,onClick:function(){j.find((function(t){return t.id===e.id}))?d(!0):(h(v([e])),c(""),d(!1),n(null))},children:u?"This city is on your list":"Add to my list"}),a&&Object(S.jsx)(X.a,{className:"cursor",onClick:function(){return function(t){h(y(t.id))}(a)}})]})]})},Q=[{path:s,Component:function(){var t=Object(l.c)((function(t){return t.toolkitReduce.listOfCities}));return Object(S.jsx)(S.Fragment,{children:t.length<=0?Object(S.jsx)("h2",{children:"No city list"}):Object(S.jsx)(S.Fragment,{children:t.map((function(t){return Object(S.jsx)(P,{city:t},null===t||void 0===t?void 0:t.id)}))})})}},{path:"/weather/:id",Component:G}],Y=function(){return Object(S.jsxs)(o.d,{children:[Q.map((function(t){var e=t.path,n=t.Component;return Object(S.jsx)(o.b,{path:e,component:n,exact:!0},e)})),Object(S.jsx)(o.a,{to:s})]})},Z=n(6),$=n(8),tt=n(177),et=n(190),nt=n(180),it=Object($.a)(nt.a)((function(t){var e=t.theme;return{borderBottom:"1px solid black",color:"inherit","& .MuiInputBase-input":Object(Z.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),ct=function(t){var e=t.value,n=t.setValue,c=t.setError,a=t.setSearchCity,r=t.setLoad,o=function(t,e){var n=Object(i.useRef)(),c=Object(i.useCallback)((function(){for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];n.current&&clearTimeout(n.current),n.current=setTimeout((function(){t.apply(void 0,c)}),e)}),[t,e]);return c}((function(t){(e=t,d.a.get(h+"weather?q=".concat(e,"&units=metric&appid=").concat(j))).then((function(t){a(t.data),r(!1)})).catch((function(t){c(t),a(null),r(!1)}));var e}),1e3),u=Object(l.b)();return Object(S.jsx)(tt.a,{color:"default",position:"sticky",style:{marginBottom:20},children:Object(S.jsxs)(et.a,{children:[Object(S.jsx)(N.a,{variant:"h5",sx:{flexGrow:1,display:{xs:"none",sm:"block"}},children:Object(S.jsx)(K.b,{className:"cursor",to:s,onClick:function(){n(""),u(w(null)),u(g(null))},children:"Weather List"})}),Object(S.jsx)(it,{placeholder:"Search city\u2026",value:e,onChange:function(t){n(t.target.value),o(t.target.value),r(!0)}})]})})},at=n(191),rt=n(178),ot=function(){var t=Object(i.useState)(""),e=Object(r.a)(t,2),n=e[0],c=e[1],a=Object(i.useState)(null),o=Object(r.a)(a,2),s=o[0],u=o[1],d=Object(i.useState)(null),j=Object(r.a)(d,2),h=j[0],b=j[1],p=Object(i.useState)(!1),O=Object(r.a)(p,2),x=O[0],f=O[1],m=Object(l.c)((function(t){return t.toolkitReduce.listOfCities})),y=JSON.parse(localStorage.getItem("cityList")),g=Object(l.b)();return Object(i.useEffect)((function(){localStorage.setItem("cityList",JSON.stringify(m))}),[m]),Object(i.useEffect)((function(){y&&g(v(y))}),[]),Object(i.useEffect)((function(){u(null)}),[h]),Object(S.jsxs)("div",{children:[Object(S.jsx)(ct,{value:n,setValue:c,setSearchCity:u,setError:b,setLoad:f}),Object(S.jsxs)(at.a,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:[x&&Object(S.jsx)(W,{props:"Search"}),""===n?Object(S.jsx)(Y,{}):Object(S.jsx)("div",{children:null===s?Object(S.jsx)(rt.a,{severity:"error",children:"City not found"}):Object(S.jsx)(P,{setValue:c,searchCity:s,setSearchCity:u})})]})]})},st=n(34),lt=Object(st.b)({toolkitReduce:f}),ut=Object(O.a)({reducer:lt});a.a.render(Object(S.jsx)(l.a,{store:ut,children:Object(S.jsx)(K.a,{basename:"/weather_app",children:Object(S.jsx)(ot,{})})}),document.getElementById("root"))},88:function(t,e,n){t.exports={load:"style_load__1E9Rz",move:"style_move__10wyp"}}},[[140,1,2]]]);
//# sourceMappingURL=main.ca1172ab.chunk.js.map